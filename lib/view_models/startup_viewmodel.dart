import 'dart:async';
import 'dart:typed_data';

import 'package:pet_community/util/base_to_uint8list.dart';
import 'package:pet_community/util/tools.dart';
import 'package:pet_community/views/navigation_view.dart';

class StartUpViewModel extends ChangeNotifier {
  late Timer _timer;
  int seconds = 40; //秒数
  late Uint8List bytes; //启动图
  ///初始化ViewModel
  void initViewModel(BuildContext context) {
    SystemUiOverlayStyle systemUiOverlayStyle = const SystemUiOverlayStyle(statusBarColor: Colors.transparent);
    SystemChrome.setSystemUIOverlayStyle(systemUiOverlayStyle);
    getLaunchImage();
    timerDown(context);
  }

  ///倒计时
  void timerDown(BuildContext context) {
    _timer = Timer.periodic(const Duration(seconds: 1), (timer) {
      if (seconds == 0) {
        _timer.cancel();
        pushNewPage(context);
      } else {
        seconds--;
      }
      notifyListeners();
    });
  }

  ///进入主页
  void pushNewPage(BuildContext context) {
    _timer.cancel();
    RouteUtil.pushReplacement(context, const NavigationView());
  }

  ///启动图
  void getLaunchImage() {
    bytes = BaseToUint8List().base64ToImage(
      "data:image/png;base64,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",
    );
  }
}
